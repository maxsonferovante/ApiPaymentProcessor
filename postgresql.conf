# Configurações PostgreSQL otimizadas para máxima performance
# (aplicadas via command line no docker-compose.yml)

# Conexões otimizadas
listen_addresses = '*'
max_connections = 20
superuser_reserved_connections = 1

# WAL e durabilidade - máxima performance (mas compatível)
# wal_level = replica (padrão - compatível com max_wal_senders)
wal_buffers = 2MB
synchronous_commit = off
fsync = off
full_page_writes = off

# Memória otimizada para container 100MB
shared_buffers = 32MB
effective_cache_size = 64MB
work_mem = 2MB
maintenance_work_mem = 8MB

# Checkpoints otimizados
checkpoint_completion_target = 0.9
checkpoint_timeout = 5min

# Planner otimizado para agregações
enable_seqscan = on
enable_indexscan = on
enable_bitmapscan = on
enable_hashjoin = on
enable_hashagg = on

# Statistics para otimizador
default_statistics_target = 50

# Logs desabilitados para performance
log_statement = 'none'
log_duration = off
log_lock_waits = off
log_error_verbosity = terse
log_min_messages = warning
log_min_error_statement = panic
logging_collector = off

# Configurações adicionais para performance
# (não aplicadas via command line para evitar conflitos)
# wal_level = replica (mantido padrão)
# max_wal_senders = 10 (mantido padrão)
# hot_standby = on (mantido padrão)
